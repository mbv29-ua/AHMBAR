DEF NUM_ENTITIES EQU 32

DEF SPR_BASE     EQU $C000
DEF PHYS_BASE    EQU $C100
DEF ATTR_BASE    EQU $C200
DEF CONT_BASE    EQU $C300
DEF ANIM_BASE    EQU $C400
DEF JAIME_BASE   EQU $C500
DEF AI_BASE  	 EQU $C600
DEF SONIA_BASE   EQU $C700
DEF CMP_END		 EQU $C800

DEF CMP_SPRIT_H  EQU HIGH(SPR_BASE)
DEF CMP_PHYS_H   EQU HIGH(PHYS_BASE)
DEF CMP_ATTR_H   EQU HIGH(ATTR_BASE)
DEF CMP_CONT_H   EQU HIGH(CONT_BASE)

DEF CMP_AABB_H	 EQU HIGH(JAIME_BASE)
DEF CMP_AI_H	 EQU HIGH(AI_BASE)
DEF CMP_SONIA_H	 EQU HIGH(SONIA_BASE)

; =============================================================
; OFFSETS DE LOS COMPONENTES
; =============================================================

; --- SPRITE COMPONENT ---
RSRESET
DEF SPR_Y      RB 1
DEF SPR_X      RB 1
DEF SPR_TILE   RB 1
DEF SPR_ATTR   RB 1
DEF SPR_SIZE   RB 0

; --- PHYSICS COMPONENT ---
RSRESET
DEF PHY_VY       RB 1
DEF PHY_VY_COMA  RB 1
DEF PHY_VX     	 RB 1
DEF PHY_VX_COMA  RB 1
DEF PHYS_SIZE  RB 0

; --- ATTR COMPONENT ---
RSRESET
DEF ATT_ENTITY_FLAGS  	RB 1
DEF INTERACTION_FLAGS	RB 1
DEF PHY_FLAGS			RB 1
DEF ENTITY_HEALTH  		RB 1  ; Vida de la entidad (enemigos)
DEF ATTR_SIZE  			RB 0

; --- CONT COMPONENT ---
RSRESET
DEF COUNT_MOVING_COOLDOWN    RB 1
DEF COUNT_JUMPING_COOLDOWN   RB 1
DEF CONT_FREE3   RB 1
DEF CONT_FREE4   RB 1
DEF CONT_SIZE    RB 0

; --- ANIMATION COMPONENT ---
RSRESET
DEF AN_FREE1   RB 1
DEF AN_FREE2   RB 1
DEF AN_FREE3   RB 1
DEF AN_FREE4   RB 1
DEF ANIM_SIZE  RB 0

; --- JAIME COMPONENT ---
RSRESET
DEF ENTITY_HEIGHT RB 1
DEF ENTITY_WIDTH  RB 1
DEF JAIME_FREE3   RB 1
DEF JAIME_FREE4   RB 1
DEF JAIME_SIZE    RB 0

; --- AI COMPONENT ---
RSRESET
DEF AI_ROUTINE_1   		RB 2
DEF AI_ROUTINE_2   		RB 2
DEF AI_ROUTINES_SIZE   	RB 0

; --- SONIA COMPONENT ---
RSRESET
DEF SONIA_FREE1   RB 1
DEF SONIA_FREE2   RB 1
DEF ENEMY_ID_1    RB 1
DEF ENEMY_ID_2    RB 1
DEF SONIA_SIZE    RB 0


; =============================================================
; FLAGS DE ENTIDAD
; =============================================================
; --- Bits en ATT_ENTITY_FLAGS ---

DEF E_BIT_SENTINEL  		EQU 7 ; 1 = FINAL,  			0 = NO FINAL
DEF E_BIT_FREE				EQU 6 ; 1 =  USED,  			0 = FREE
DEF E_BIT_PLAYER     		EQU 5 ; 1 = IS THE PLAYER,		0 = IT IS NOT
DEF E_BIT_ENEMY     		EQU 4 ; 1 = IS AN ENEMY, 		0 = IT IS NOT
DEF E_BIT_INTELLIGENT_ENEMY EQU 3 ; 1 = FOLLOWS THE PLAYER, 0 = IT DOES NOT
DEF E_BIT_BULLET			EQU 2 ; 1 = IT IS THE BULLET, 	0 = IT IS NOT


; =============================================================
; FLAGS DE INTERACCION CON EL ENTORNO
; =============================================================
; --- Bits en INTERACTION_FLAGS --- 
; Be careful changing this. Changing this implies a modification of
; src/enemies/enemies.inc and all the src/enemies/enemies_definitions
; file.

DEF E_BIT_MOVABLE   	 EQU 7 ; 1 = MOVING OBJECT, 		0 = NOT MOVING OBJECT
DEF E_BIT_GRAVITY   	 EQU 6 ; 1 = AFFECTED BY GRAVITY, 	0 = NOT AFFECTED
DEF E_BIT_DIES_OUT_OF_SCREEN  EQU 5 ; 1 = DIES OUT OF SCREEN, 	0 = DOES NOT
DEF E_BIT_COLLIDABLE	 EQU 4 ; 1 = COLLIDES WITH SOLIDS,	0 = NOT COLLIDES
DEF E_BIT_DAMAGEABLE	 EQU 3 ; 1 = RECEIVES DAMAGE FROM BULLETS, 0 = NOT
DEF E_BIT_STICK_TO_EDGES EQU 2 ; 1 = STICKS TO EDGES,		0 = NOT


; =============================================================
; FLAGS DE FISICAS
; =============================================================
; --- Bits en PHY_FLAGS ---

DEF PHY_FLAG_GROUNDED EQU 7    ; 1 = ESTA EN SUELO 
DEF PHY_FLAG_JUMPING  EQU 6    ; 1 = ESTA SALTANDO SE PUEDE QUITAR SI SE NECESITA UN BIT AQUI

DEF PHY_FLAG_REJUMP   EQU 5    ; 1 = PUEDE SALTAR  SE PUEDE QUITAR SI SE NECESITA UN BIT AQUI

DEF ENTITY_CMP_SENTINEL 	EQU $FF



DEF CMP_SPRITES_TOTALBYTES 		= NUM_ENTITIES * SPR_SIZE
DEF CMP_PHYSICS_TOTALBYTES 		= NUM_ENTITIES * PHYS_SIZE
DEF CMP_ATTRIBUTES_TOTALBYTES 	= NUM_ENTITIES * ATTR_SIZE
DEF CMP_COUNTERS_TOTALBYTES 	= NUM_ENTITIES * CONT_SIZE
DEF CMP_ANIMATION_TOTALBYTES 	= NUM_ENTITIES * ANIM_SIZE
DEF CMP_JAIME_TOTALBYTES 		= NUM_ENTITIES * JAIME_SIZE
DEF CMP_AI_TOTALBYTES 			= NUM_ENTITIES * AI_ROUTINES_SIZE
DEF CMP_SONIA_TOTALBYTES 		= NUM_ENTITIES * SONIA_SIZE


DEF ENTITIES_MEM_START EQU $C000

; Tamaño total de una entidad (suma de todos los componentes)
DEF ENTITY_TOTAL_SIZE = SPR_SIZE + PHYS_SIZE + ATTR_SIZE + CONT_SIZE + ANIM_SIZE + JAIME_SIZE + AI_ROUTINES_SIZE + SONIA_SIZE

; Tamaño total del bloque de memoria de todas las entidades
DEF ENTITIES_MEM_SIZE  = CMP_END-SPR_BASE ; NUM_ENTITIES * ENTITY_TOTAL_SIZE
DEF ENTITIES_MEM_END   = ENTITIES_MEM_START + ENTITIES_MEM_SIZE